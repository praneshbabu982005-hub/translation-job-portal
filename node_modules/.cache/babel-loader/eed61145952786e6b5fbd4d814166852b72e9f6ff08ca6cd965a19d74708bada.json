{"ast":null,"code":"import _objectSpread from\"C:/Users/prane/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useContext}from'react';import{AuthContext}from'../App';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminPanel(){const[jobs,setJobs]=useState([]);const[loading,setLoading]=useState(true);const[applicants,setApplicants]=useState({});const{token}=useContext(AuthContext);useEffect(()=>{fetch('http://localhost:5000/api/jobs').then(res=>res.json()).then(data=>{setJobs(data);setLoading(false);});},[]);const fetchApplicants=async jobId=>{if(applicants[jobId])return;// already loaded\nconst res=await fetch(\"http://localhost:5000/api/jobs/\".concat(jobId,\"/applicants\"),{headers:{'Authorization':\"Bearer \".concat(token)}});const data=await res.json();setApplicants(prev=>_objectSpread(_objectSpread({},prev),{},{[jobId]:data}));};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Posted Jobs\"}),/*#__PURE__*/_jsx(\"ul\",{children:jobs.map(job=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:job.title}),\" - \",job.company,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Applicants: \",job.applicants?job.applicants.length:0,/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:'1rem'},onClick:()=>fetchApplicants(job._id),children:\"View Applicants\"}),applicants[job._id]&&/*#__PURE__*/_jsxs(\"ul\",{children:[applicants[job._id].length===0&&/*#__PURE__*/_jsx(\"li\",{children:\"No applicants yet.\"}),applicants[job._id].map((a,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:a.name}),\" (\",a.email,\")\",/*#__PURE__*/_jsx(\"br\",{}),a.coverLetter]},idx))]})]},job._id))}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Users: \",/*#__PURE__*/_jsx(UserCount,{})]})]});}function UserCount(){const[count,setCount]=useState(null);const{token}=useContext(AuthContext);useEffect(()=>{fetch('http://localhost:5000/api/admin/users',{headers:{'Authorization':\"Bearer \".concat(token)}}).then(res=>res.json()).then(data=>setCount(data.length));},[token]);return count===null?'Loading...':count;}export default AdminPanel;","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","jsx","_jsx","jsxs","_jsxs","AdminPanel","jobs","setJobs","loading","setLoading","applicants","setApplicants","token","fetch","then","res","json","data","fetchApplicants","jobId","concat","headers","prev","_objectSpread","children","map","job","title","company","length","style","marginLeft","onClick","_id","a","idx","name","email","coverLetter","UserCount","count","setCount"],"sources":["C:/Users/prane/OneDrive/Desktop/ad/translation-job-portal/src/components/AdminPanel.js"],"sourcesContent":["\r\nimport React, { useEffect, useState, useContext } from 'react';\r\nimport { AuthContext } from '../App';\r\n\r\nfunction AdminPanel() {\r\n  const [jobs, setJobs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [applicants, setApplicants] = useState({});\r\n  const { token } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    fetch('http://localhost:5000/api/jobs')\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setJobs(data);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const fetchApplicants = async (jobId) => {\r\n    if (applicants[jobId]) return; // already loaded\r\n    const res = await fetch(`http://localhost:5000/api/jobs/${jobId}/applicants`, {\r\n      headers: { 'Authorization': `Bearer ${token}` }\r\n    });\r\n    const data = await res.json();\r\n    setApplicants(prev => ({ ...prev, [jobId]: data }));\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Admin Panel</h2>\r\n      <h3>Posted Jobs</h3>\r\n      <ul>\r\n        {jobs.map(job => (\r\n          <li key={job._id}>\r\n            <strong>{job.title}</strong> - {job.company} <br/>\r\n            Applicants: {job.applicants ? job.applicants.length : 0}\r\n            <button style={{marginLeft:'1rem'}} onClick={() => fetchApplicants(job._id)}>View Applicants</button>\r\n            {applicants[job._id] && (\r\n              <ul>\r\n                {applicants[job._id].length === 0 && <li>No applicants yet.</li>}\r\n                {applicants[job._id].map((a, idx) => (\r\n                  <li key={idx}><b>{a.name}</b> ({a.email})<br/>{a.coverLetter}</li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <p>Total Users: <UserCount /></p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UserCount() {\r\n  const [count, setCount] = useState(null);\r\n  const { token } = useContext(AuthContext);\r\n  useEffect(() => {\r\n    fetch('http://localhost:5000/api/admin/users', {\r\n      headers: { 'Authorization': `Bearer ${token}` }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => setCount(data.length));\r\n  }, [token]);\r\n  return count === null ? 'Loading...' : count;\r\n}\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}